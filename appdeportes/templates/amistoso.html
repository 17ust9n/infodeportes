{% extends 'base.html' %}
{% load static %}

{% block title %}Partido Amistoso{% endblock %}

{% block content %}
<header>
  <h2 class="titulo">Partido Amistoso ğŸ¤</h2>
</header>

<main class="main-partido">

<!-- FORMULARIO PARA JUGAR -->
<form method="post" class="form-partido">
    {% csrf_token %}

    <!-- Contenedor de Equipo + Goles en la misma fila -->
    <div class="form-row">
        <div class="form-group-inline">
            <label for="equipo_vos">Tu Equipo:</label>
            <select name="equipo_vos" id="equipo_vos" required>
                <option value="" disabled selected>Elige tu equipo</option>
                {% for equipo in equipos %}
                    <option value="{{ equipo.id }}"
                        {% if equipo_vos and equipo.id == equipo_vos.id %}selected{% endif %}>
                        {{ equipo.nombre }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group-inline">
            <label for="goles_vos">Goles que marcaste:</label>
            <input type="number" name="goles_vos" id="goles_vos" min="0" max="5"
                   value="{{ goles_vos|default:0 }}" required>
        </div>
    </div>

    <div class="botonera">
        <!-- BotÃ³n Jugar: sigue dentro del formulario, requiere equipo -->
        <button type="submit" class="boton-personalizado boton-naranja">Jugar â–¶ï¸</button>
    </div>
</form>

<!-- BotÃ³n Ver Historial: formulario independiente -->
<form method="get" action="{% url 'lista_partidos' %}" style="margin-top:10px;">
    <button type="submit" class="boton-personalizado boton-azul">Ver Historial ğŸ“‹</button>
</form>



  {% if resultado %}
  <hr>
  <h2>Resultado del Partido:</h2>

  <div class="recuadro-resultado">
      <p class="marcador">
          <strong>{{ equipo_vos.nombre }}</strong> {{ goles_vos }} (VOS)
          &nbsp; - &nbsp;
          {{ goles_pc }} (PC) <strong>{{ equipo_pc.nombre }}</strong>
      </p>
      <p class="resultado">{{ resultado }}</p>

      <div class="botonera">
          <form method="get" action="{% url 'amistoso' %}">
              <button type="submit" class="boton-personalizado boton-rojo">Reiniciar ğŸ”„</button>
          </form>

          <form method="post" action="{% url 'guardar_partido' %}">
              {% csrf_token %}
              <input type="hidden" name="equipo_vos_id" value="{{ equipo_vos.id }}">
              <input type="hidden" name="equipo_pc_id" value="{{ equipo_pc.id }}">
              <input type="hidden" name="goles_vos" value="{{ goles_vos }}">
              <input type="hidden" name="goles_pc" value="{{ goles_pc }}">
              <input type="hidden" name="resultado" value="{{ resultado }}">
              <button type="submit" class="boton-personalizado boton-verde">Guardar Partida ğŸ’¾</button>
          </form>
      </div>

      {% if guardado %}
          <p class="mensaje-guardado">âœ… Partida guardada.</p>
      {% endif %}
  </div>
  {% endif %}

</main>
{% endblock %}
