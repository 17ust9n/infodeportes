{% extends 'base.html' %}
{% load static %}

{% block title %}{{ equipo.nombre }}{% endblock %}

{% block content %}
<header>
  <h2 class="titulo">{{ equipo.nombre }}</h2>
</header>

<main>
  <div>
    {% if equipo.escudo %}
      <img src="{{ equipo.escudo.url }}" alt="Escudo de {{ equipo.nombre }}" width="200">
    {% else %}
      <p><em>No hay escudo disponible.</em></p>
    {% endif %}
    
    <p><strong>A帽o de fundaci贸n:</strong> {{ equipo.anio_fundacion }}</p>
    <p><strong>Cantidad de hinchas:</strong> {{ equipo.cantidad_hinchas }}</p>
    <p><strong>Cantidad de copas:</strong> {{ equipo.cantidad_copas }}</p>
    <p><strong>Cl谩sico rival:</strong> {{ equipo.clasico_rival }}</p>
    <p><strong>Apodo:</strong> {{ equipo.apodo }}</p>

    {% if equipo.estadio %}
      <div class="foto-estadio">
        <h3>Estadio {% if equipo.nombre_estadio %} - {{ equipo.nombre_estadio }}{% endif %}</h3>
        
        <img src="{{ equipo.estadio.url }}" alt="Estadio de {{ equipo.nombre }}" id="imagen-estadio">
        
        <!-- Bot贸n para ver en grande -->
        <button onclick="verImagenGrande()" class="boton boton-ver-imagen"> Ver imagen en grande</button>
      </div>
    {% endif %}

    {% if equipo.ubicacion_estadio %}
  <h3>Ubicaci贸n del estadio</h3>
  <p><strong>Direcci贸n:</strong> {{ equipo.ubicacion_estadio }}</p>

    <div class="map-container" style="margin-top: 1em;">
      <iframe width="600" height="450" style="border:0" loading="lazy" allowfullscreen
      referrerpolicy="no-referrer-when-downgrade"
      src="https://www.google.com/maps?q={{ equipo.ubicacion_estadio|urlencode }}&output=embed">
      </iframe>
    </div>
    {% else %}
    <p>No hay ubicaci贸n cargada para este estadio.</p>
    {% endif %}


    <div class="botonera">
      <a href="{% url 'lista_equipos' %}" class="boton">猬锔 Volver a la lista</a>
    </div>
  </div>
</main>

<!-- Modal para ver la imagen en grande -->
<div id="modal-imagen" class="modal-imagen" onclick="cerrarModal()">
  <span class="cerrar-modal">&times;</span>
  <img class="modal-contenido" id="img-modal">
</div>

<script>
function verImagenGrande() {
  var modal = document.getElementById("modal-imagen");
  var imgModal = document.getElementById("img-modal");
  var imgEstadio = document.getElementById("imagen-estadio");
  
  modal.style.display = "flex";
  imgModal.src = imgEstadio.src;
  
  // Prevenir scroll del body cuando el modal est谩 abierto
  document.body.style.overflow = "hidden";
}

function cerrarModal() {
  var modal = document.getElementById("modal-imagen");
  modal.style.display = "none";
  document.body.style.overflow = "auto";
}

// Cerrar con la tecla Escape
document.addEventListener('keydown', function(event) {
  if (event.key === "Escape") {
    cerrarModal();
  }
});
</script>
{% endblock %}